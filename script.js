String.prototype.replaceAt=function(e,t){return this.substring(0,e)+t+this.substring(e+1,this.length)},String.prototype.middleAdd=function(e,t){return this.substring(0,e)+t+this.substring(e,this.length)},String.prototype.replaceAll=function(e,t,l){return this.replace(new RegExp(e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),l?"gi":"g"),"string"==typeof t?t.replace(/\$/g,"$$$$"):t)},fetch("./key.json").then((e=>e.json())).then((e=>{asyncCall(e)}));var timer="";function asyncCall(e){const t=$('[name="Unicode"]'),r=$('[name="Classic"]');r.focus();let a="",n=0,s="";var i=0;function o(){value=t.val();var a="";new Promise((t=>{if(value){var l=e[0][1];for(var r of l)value=value.replaceAll(r.out,r.seq),r==l[l.length-1]&&t(value)}})).then((t=>new Promise((r=>{var n="";for(l of t){var s=transform(!1,l,e[0][0]);if(s){var i=transform(parseInt(s[0]),!1,e[1][0]),o="";if(i)o=s[3]?i[2]:i[1];else{var c=["0","1","2","3","4","5","6","7","8","9","!","@","#","$","%","^","*","(",")","?",",","<",".",">","=","+",":",";","/"],f=["০","১","২","৩","৪","৫","৬","৭","৮","৯","!","@","#","৳","%","ৰ","*","(",")","?",",","<",".",">","=","+",":",";","/"];for(var u of f)if(l==u){o=c[f.indexOf(u)];break}}"©"!=n||"‰"!=o&&"w"!=o&&"‡"!=o&&"v"!=o&&"x"!=o&&"y"!=o&&"~"!=o&&"Š"!=o&&"„"!=o?o+=n:o="i&"+o,n="","‰"==o||"w"==o||"‡"==o?"‍"==a[a.length-2]&&"&"==a[a.length-3]?(a=a.middleAdd(a.length-4,o),o=""):"&"==a[a.length-2]?(a="&"==a[a.length-4]?a.middleAdd(a.length-5,o):a.middleAdd(a.length-3,o),o=""):"©"==a[a.length-1]?(a=a.middleAdd(a.length-2,o),o=""):"&"!=a[a.length-1]&&(a=a.middleAdd(a.length-1,o),o=""):"&"==o&&"i"==a[a.length-1]&&("‍"!=n?(o="",a=a.replaceAt(a.length-1,""),n="©"):n=""),a+=o}else if("়"==l){switch(a[a.length-1]){case"h":a+="q";break;case"W":a+="o";break;case"X":a+="p"}a=a.replaceAt(a.length-2,"")}else"‍"==l?n=l:l.match(/[^a-zA-Z]/)&&(a+=l);l==t[t.length-1]&&r()}})))).then((()=>{if(a.length>=2){let l=e[1][1];for(var t of l)a=a.replaceAll(t.seq,t.out);for(var t of[{seq:"b&Î",out:"š¿"},{seq:"m&Î",out:"¯¿"},{seq:"&‍h",out:"¨"},{seq:"m&µ",out:"¯Œ"}])a=a.replaceAll(t.seq,t.out)}r.val(a)}))}function c(){value=r.val(),a="";var i="";new Promise((t=>{if(value){let r=e[1][1];for(var l of[{seq:"†",out:"‡"},{seq:"¡",out:"&e"},{seq:"¯Œ",out:"m&K&i"}])value=value.replaceAll(l.seq,l.out);for(var l of r)value=value.replaceAll(l.out,l.seq),l==r[r.length-1]&&t(value)}})).then((t=>new Promise((r=>{for(l of t){var o=transform(!1,l,e[1][0]);if(o){var c=transform(parseInt(o[0]),!1,e[0][0]),u=(o[3]?c[2]:c[1])+a,d=i[i.length-1];if("্"!=d)switch(u){case"ে":case"ৈ":case"ি":a=u,u="";break;case"র্":i="ে"==d||"ৈ"==d||"ি"==d?i.middleAdd(i.length-2,u):i.middleAdd(i.length-1,u),u="";break;case"‍্য":"ে"!=d&&"ৈ"!=d&&"ি"!=d||(u+=d,i=i.replaceAt(i.length-1,""));break;case"্":"ে"!=d&&"ৈ"!=d&&"ি"!=d||(s=d,n=i.length+1,i=i.replaceAt(i.length-1,""));break;default:a=""}i+=u,n&&i.length===n&&(i+=s,n=0,a="")}else{var g=["0","1","2","3","4","5","6","7","8","9","$","^","š","¯","z"],h=["০","১","২","৩","৪","৫","৬","৭","৮","৯","৳","ৰ","ন","স","ু"];for(var v of g){if(l==v){i+=h[g.indexOf(v)]+a,a="";break}v==g[g.length-1]&&(i+=l)}}let m=e[0][1];i=f(i,m),l==t[t.length-1]&&r()}})))).then((()=>{t.val(i)}))}function f(e,t){var l;for(var r of(l=e.length>=5?e.substring(e.length-5,e.length):e,t))l=l.replace(r.seq,r.out);return e.substring(0,e.length-5)+l}t.on("keydown",(l=>{let c=l.keyCode,u=l.shiftKey,d=l.ctrlKey,g=l.altKey,h=transform(c,!1,e[0][0]);if(h){if(d||g)console.warn("Externel..."),d&&86==c&&setTimeout((()=>{t.val(t.val().replace(/(?<![র‍])্য/g,"‍্য"))}),200);else{l.preventDefault();let r=t.val(),o=document.getElementsByName("Unicode")[0],c=o.selectionEnd;if(o.selectionStart!=c){var v=o.selectionStart;i-=c-v,r=r.substring(0,v)+r.substring(c,r.length),c=v}var m;m=c>0?r[c-1]:"";let d=(u?h[2]:h[1])+a;if(a&&(r=r.replaceAt(c-1,""),c-=1,i-=1),"্"!=m)switch(d){case"ে":case"ৈ":case"ি":a=d;break;case"র্":r="ে"==m||"ৈ"==m||"ি"==m?r.middleAdd(c-2,d):r.middleAdd(c-1,d),d="";break;case"্র":case"‍্য":case"্":"ে"!=m&&"ৈ"!=m&&"ি"!=m||(r=r.replaceAt(c-1,""),"্"==d?(n=r.length+2,s=m):d+=m);break;default:a=""}else switch(d){case"ে":case"ৈ":case"ি":case"ী":case"ু":case"ূ":case"ৃ":case"া":case"ৃ":case"ৗ":n=void 0,r=r.middleAdd(c-1,s),c+=1,s=""}r=r.middleAdd(c,d),n&&r.length===n&&(r=r.middleAdd(c+1,s),n=0,a=""),t.val(f(r,e[0][1])),d&&(curlength=t.val().length,c+=curlength-i,i=curlength,o.selectionEnd=c)}clearTimeout(timer),timer=setTimeout(o,1e3)}else 8==c?(i-=1,clearTimeout(timer),timer=setTimeout(o,1e3)):9==c&&(l.preventDefault(),r.focus(),a="",n="",s="")})),r.on("keydown",(l=>{let i=l.keyCode,o=l.shiftKey,u=l.ctrlKey,d=l.altKey,g=transform(i,!1,e[1][0]),h="";if(g)if(u||d)a="",u&&86==i&&setTimeout((()=>{r.val(r.val().replace(/\u2022(?![LNg\u00ff(\u00ffy)(\u00ffz)(\u00ff~)(\u00ff\u201a)(\u00ff\u201e)(\u00ff\u2026)])/g,"·"))}),200);else{l.preventDefault(),h=r.val();var v=document.getElementsByName("Classic")[0];let t=v.selectionEnd;if(v.selectionStart!=t){var m=v.selectionStart;h=h.substring(0,m)+h.substring(t,h.length),t=m}let a=o?g[2]:g[1];h=h.middleAdd(t,a),r.val(f(h,e[1][1])),v.selectionEnd=t+1}else 9==i&&(l.preventDefault(),t.focus(),a="",n="",s="");clearTimeout(timer),timer=setTimeout(c,500)})),$("#copy1").click((()=>{navigator.clipboard.writeText(r.val()),r.focus(),$("#copy1").text("Copied!"),setTimeout((()=>{$("#copy1").text("Copy")}),1e3)})),$("#copy2").click((()=>{navigator.clipboard.writeText(t.val()),t.focus(),$("#copy2").text("Copied!"),setTimeout((()=>{$("#copy2").text("Copy")}),1e3)}))}function transform(e=!1,t=!1,l){var r=e?"keycode":"nrml_txt";if(t)for(var a=0;a<l.length;a++){if(t==(n=l[a])[r])return[n.keycode,n.nrml_txt,n.sft_txt,!1];if(t==n.sft_txt)return[n.keycode,n.nrml_txt,n.sft_txt,!0]}else for(a=0;a<l.length;a++){var n;if(e==(n=l[a])[r])return[n.keycode,n.nrml_txt,n.sft_txt,!1]}}
    //prevent spy copy site
    document.addEventListener('contextmenu', (e) => e.preventDefault());

function ctrlShiftKey(e, keyCode) {
  return e.ctrlKey && e.shiftKey && e.keyCode === keyCode.charCodeAt(0);
}

document.onkeydown = (e) => {
  // Disable F12, Ctrl + Shift + I, Ctrl + Shift + J, Ctrl + U
  if (
    e.keyCode === 123 ||
    ctrlShiftKey(e, 'I') ||
    ctrlShiftKey(e, 'J') ||
    ctrlShiftKey(e, 'C') ||
    (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0))
  )
    return false;
};
